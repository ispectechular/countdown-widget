<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Class Countdown – IEP Hub Style</title>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --slate:#4A7A92;
      --green:#879B8D;
      --purple:#756A85;
      --lilac:#8E869F;
      --glass-bg: rgba(255,255,255,.7);
      --radius:20px;
      --pad:5%;
    }
    html,body{
      height:100%;
      margin:0;
      background:transparent;
      font-family:"Lexend", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    }
    .wrap{
      position:relative;
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      box-sizing:border-box;
    }
    .card{
      width:100%;
      height:100%;
      background:var(--glass-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius:var(--radius);
      box-sizing:border-box;
      padding:var(--pad);
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:0.6em;
      text-align:center;
    }
    .card{ 
      --minside: min(100cqw, 100cqh);
      --title: clamp(1rem, calc(var(--minside) * 0.06), 2rem);
      --number: clamp(2.4rem, calc(var(--minside) * 0.18), 6rem);
      --sub: clamp(0.9rem, calc(var(--minside) * 0.045), 1.4rem);
    }
    .title{
      font-weight:700;
      font-size:var(--title);
      color:var(--slate);
    }
    .count{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:0.2em;
    }
    .num{
      font-weight:700;
      font-size:var(--number);
      color:var(--purple);
      line-height:1;
      transition:opacity .25s ease-in-out, transform .25s ease-in-out;
    }
    .sep{
      font-weight:700;
      font-size:calc(var(--number) * 0.5);
      color:var(--lilac);
      opacity:.9;
    }
    .subtitle{
      font-weight:500;
      font-size:var(--sub);
      color:var(--green);
      opacity:.95;
    }
    .aspect{
      position:absolute; inset:var(--pad);
      aspect-ratio:4 / 3;
      max-width:calc(100% - 2*var(--pad));
      max-height:calc(100% - 2*var(--pad));
      margin:auto;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .aspect > .card{ width:100%; height:100%; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="aspect">
      <div class="card">
        <div id="title" class="title">School Starts In</div>
        <div class="count" aria-live="polite" aria-atomic="true">
          <span id="m" class="num">00</span><span class="sep">:</span>
          <span id="s" class="num">00</span>
        </div>
        <div id="subtitle" class="subtitle">Next bell at 8:05 AM</div>
      </div>
    </div>
  </div>

  <script>
  (function(){
    const TZ = 'America/Indiana/Indianapolis';
    const titleEl = document.getElementById('title');
    const mEl = document.getElementById('m');
    const sEl = document.getElementById('s');
    const subtitleEl = document.getElementById('subtitle');

    function getZonedParts(date=new Date()){
      const fmt = new Intl.DateTimeFormat('en-US',{
        timeZone: TZ,
        hour12: true,
        hour:'2-digit', minute:'2-digit', second:'2-digit'
      });
      const parts = fmt.formatToParts(date);
      const get = t => parts.find(p => p.type===t)?.value;
      let hour12 = parseInt(get('hour'),10);
      const ampm = get('dayPeriod');
      let hour24 = hour12 % 12 + (ampm?.toLowerCase()==='pm' ? 12 : 0);
      const mm = parseInt(get('minute'),10);
      const ss = parseInt(get('second'),10);
      return {hour:hour24, minute:mm, second:ss, ampm, hour12};
    }
    function two(n){ return n<10? '0'+n : ''+n; }
    function secs(h,m,s){ return h*3600 + m*60 + s; }

    const B = {
      START: secs(8,5,0),
      P1_END: secs(8,50,0),
      PASS1_END: secs(8,55,0),
      P2_END: secs(9,40,0),
      PASS2_END: secs(9,45,0),
      P3_END: secs(10,30,0),
      PASS3_END: secs(10,35,0),
      P4_END: secs(11,15,0),
      P5A_END: secs(12,5,0),
      P5B_END: secs(12,35,0),
      PASS5_END: secs(12,40,0),
      P6_END: secs(13,25,0),
      PASS6_END: secs(13,30,0),
      P7_END: secs(14,15,0),
      PASS7_END: secs(14,20,0),
      P8_END: secs(15,5,0)
    };

    function state(nowSec){
      if (nowSec < B.START){
        return {label:'School Starts In', range:'Next bell at 8:05 AM', endSec:B.START};
      }
      if (nowSec < B.P1_END) return {label:'Period 1 Ends In', range:'8:05 – 8:50', endSec:B.P1_END};
      if (nowSec < B.PASS1_END) return {label:'Passing Period', range:'Next class at 8:55', endSec:B.PASS1_END};
      if (nowSec < B.P2_END) return {label:'Period 2 Ends In', range:'8:55 – 9:40', endSec:B.P2_END};
      if (nowSec < B.PASS2_END) return {label:'Passing Period', range:'Next class at 9:45', endSec:B.PASS2_END};
      if (nowSec < B.P3_END) return {label:'Period 3 Ends In', range:'9:45 – 10:30', endSec:B.P3_END};
      if (nowSec < B.PASS3_END) return {label:'Passing Period', range:'Next class at 10:35', endSec:B.PASS3_END};
      if (nowSec < B.P4_END) return {label:'Period 4 Ends In', range:'10:35 – 11:15', endSec:B.P4_END};
      if (nowSec < B.P5A_END) return {label:'Period 5 Ends In', range:'11:15 – 12:05', endSec:B.P5A_END};
      if (nowSec < B.P5B_END) return {label:'Period 5 Ends In', range:'12:05 – 12:35', endSec:B.P5B_END};
      if (nowSec < B.PASS5_END) return {label:'Passing Period', range:'Next class at 12:40', endSec:B.PASS5_END};
      if (nowSec < B.P6_END) return {label:'Period 6 Ends In', range:'12:40 – 1:25', endSec:B.P6_END};
      if (nowSec < B.PASS6_END) return {label:'Passing Period', range:'Next class at 1:30', endSec:B.PASS6_END};
      if (nowSec < B.P7_END) return {label:'Period 7 Ends In', range:'1:30 – 2:15', endSec:B.P7_END};
      if (nowSec < B.PASS7_END) return {label:'Passing Period', range:'Next class at 2:20', endSec:B.PASS7_END};
      if (nowSec < B.P8_END) return {label:'Period 8 Ends In', range:'2:20 – 3:05', endSec:B.P8_END};
      return {label:'School Day Over', range:'See you tomorrow!', endSec:null};
    }

    let lastSec = -1;

    function tick(){
      const now = new Date();
      const p = getZonedParts(now);
      const nowSec = secs(p.hour, p.minute, p.second);

      const st = state(nowSec);
      titleEl.textContent = st.label;
      subtitleEl.textContent = st.range;

      if (st.endSec == null){
        if (lastSec !== nowSec){
          mEl.textContent = '00';
          sEl.textContent = '00';
          lastSec = nowSec;
        }
        requestAnimationFrame(scheduleNext);
        return;
      }

      let remain = Math.max(0, st.endSec - nowSec);
      const MM = Math.floor(remain / 60);
      const SS = remain % 60;

      if (lastSec !== nowSec){
        mEl.textContent = two(MM);
        sEl.textContent = two(SS);
        lastSec = nowSec;
      }
      requestAnimationFrame(scheduleNext);
    }

    function scheduleNext(){
      const t = new Date();
      const ms = t.getMilliseconds();
      const wait = 1000 - ms + 5;
      setTimeout(tick, wait);
    }

    tick();
  })();
  </script>
</body>
</html>



